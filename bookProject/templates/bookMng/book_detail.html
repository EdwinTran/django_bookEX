{% extends "base.html" %}
{% load static %}

{% block title %}
   Book Detail
{% endblock title %}


{% block sidenav %}
    {% for item in item_list %}
        <li>
            <a href="{{ item.link }}"> {{ item.item }} </a>
        </li>
    {% endfor %}
{% endblock sidenav %}

{% block content %}
<!--if statement to give thanks if message was sent-->
{% if message_name %}
<h2>Thanks {{ message_name }}!</h2>
    <p>We have received your email and will respond shortly...</p>
    <button onclick="history.back()"> Go back </button>
<!--else, show book detail and message form-->
{% else %}
<h1 align="center"> {{ book.name }} Page </h1>
<table align="center" border="2" width="500">
        <tr>
            <th>
                Name
            </th>
            <th>
                Price
            </th>
            <th>
                User
            </th>
            <th>
                Picture
            </th>
        </tr>
        <tr>
            <td>
                {{ book.name }}
            </td>
            <td>
                {{ book.price }}
            </td>
            <td>
                {{ book.username }}
            </td>
            <td>
                <img src="{% static book.pic_path %}" width="40" height="40">
            </td>
        </tr>
</table>

<!--Send Message Form-->
<h1> Ask a question </h1>

<form action="{% url 'contact' %}" method="post">
    {% csrf_token %}
    <input type="hidden" name="message-book" value="{{ book.name }}">
    <input type="hidden" name="post-username" value="{{ book.username }}">
    <tr>
        <input type="text" name="message-name" class="form-control mb-30" placeholder="Your Name">
    </tr>
    <tr>
        <input type="email" name="message-email" class="form-control mb-30" placeholder="Your Email">
    </tr>
    <tr>
        <textarea name="message" class="form-control mb-30" placeholder="Your Message"></textarea>
    </tr>
    <tr>
        <button onclick="this.disabled=true;this.value='Sending...'; this.form.submit();"> Send Message </button>
    </tr>
</form>
{% endif %}
{% endblock content %}